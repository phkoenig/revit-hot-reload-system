<Window x:Class="GeoJsonImporter.Work.UI.UtmGridSetupDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

        Title="🗺️ UTM Grid Configuration" 
        Height="800" 
        Width="1000" 
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        Background="#F5F5F5"
        Loaded="Window_Loaded">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="🗺️ UTM Grid Configuration" 
                       FontSize="18" 
                       FontWeight="Bold" 
                       Foreground="#333333"
                       Margin="0,0,0,5"/>
            <TextBlock Text="Konfigurieren Sie das UTM-Koordinatensystem und Grid für Ihren Geodaten-Import" 
                       FontSize="12" 
                       Foreground="#666666"/>
        </StackPanel>
        
        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="10"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Left Panel: Map -->
            <GroupBox Grid.Column="0" Header="🌍 Standort-Auswahl" Padding="10">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Address Input -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBox Name="AddressTextBox" 
                                 Width="300" 
                                 Height="30"
                                 VerticalContentAlignment="Center"
                                 Padding="8,5"
                                 BorderBrush="#CCCCCC"
                                 BorderThickness="1"
                                 Text="Spandau, Berlin"/>
                        <Button Name="PlaceButton" 
                                Content="Platzieren" 
                                Width="80" 
                                Height="30"
                                Margin="10,0,0,0"
                                Background="#2196F3"
                                Foreground="White"
                                BorderThickness="0"
                                Click="PlaceButton_Click"/>
                    </StackPanel>
                    
                    <!-- Map Container -->
                    <Border Grid.Row="1" 
                            BorderBrush="#CCCCCC" 
                            BorderThickness="1"
                            Background="White">
                        <!-- ✅ CefSharp wird zur Laufzeit hinzugefügt -->
                        <Grid Name="BrowserContainer">
                            <!-- Loading Indicator -->
                            <TextBlock Name="LoadingText" 
                                       Text="🗺️ Initializing Map..." 
                                       HorizontalAlignment="Center" 
                                       VerticalAlignment="Center"
                                       FontSize="16" 
                                       Foreground="#666666"/>
                        </Grid>
                    </Border>
                </Grid>
            </GroupBox>
            
            <!-- Right Panel: Configuration -->
            <StackPanel Grid.Column="2">
                
                <!-- UTM Zone Selection -->
                <GroupBox Header="📍 UTM Koordinatensystem" Padding="10" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="UTM-Zone:" Margin="0,0,0,5"/>
                        <ComboBox Name="UtmZoneComboBox" Height="30" SelectedIndex="1">
                            <ComboBoxItem Content="EPSG:25832 (UTM Zone 32N)"/>
                            <ComboBoxItem Content="EPSG:25833 (UTM Zone 33N)"/>
                        </ComboBox>
                    </StackPanel>
                </GroupBox>
                
                <!-- Coordinate Display -->
                <GroupBox Header="📊 Koordinaten-Transformation" Padding="10" Margin="0,0,0,15">
                    <StackPanel>
                        <StackPanel Margin="0,0,0,8">
                            <TextBlock Text="WGS84 Lat/Lon:" FontWeight="Bold" Margin="0,0,0,2"/>
                            <TextBox Name="WgsCoordinatesTextBox" 
                                     Height="25" 
                                     IsReadOnly="True" 
                                     Background="#F9F9F9"
                                     Text="52.5370, 13.3500"/>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,8">
                            <TextBlock Text="UTM Easting/Northing:" FontWeight="Bold" Margin="0,0,0,2"/>
                            <TextBox Name="UtmCoordinatesTextBox" 
                                     Height="25" 
                                     IsReadOnly="True" 
                                     Background="#F9F9F9"
                                     Text="372000, 5814000"/>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,8">
                            <TextBlock Text="UTM gerundet (100m):" FontWeight="Bold" Margin="0,0,0,2"/>
                            <TextBox Name="UtmRoundedTextBox" 
                                     Height="25" 
                                     IsReadOnly="True" 
                                     Background="#E8F5E8"
                                     Text="372000, 5814000"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>
                
                <!-- Grid Configuration -->
                <GroupBox Header="⚙️ Grid-Einstellungen" Padding="10" Margin="0,0,0,15">
                    <StackPanel>
                        <StackPanel Margin="0,0,0,10">
                            <TextBlock Text="Betrachtungsraum:" FontWeight="Bold" Margin="0,0,0,5"/>
                            <Slider Name="GridSizeSlider" 
                                    Minimum="100" 
                                    Maximum="5000" 
                                    Value="1000" 
                                    TickFrequency="100"
                                    IsSnapToTickEnabled="True"
                                    ValueChanged="GridSizeSlider_ValueChanged"/>
                            <TextBlock Name="GridSizeLabel" 
                                       Text="Aktuell: 1000m x 1000m" 
                                       HorizontalAlignment="Center"
                                       Margin="0,5,0,0"
                                       FontStyle="Italic"
                                       Foreground="#666666"/>
                        </StackPanel>
                        <CheckBox Name="ShowGridOverlayCheckBox" 
                                  Content="Grid-Overlay auf Karte anzeigen" 
                                  IsChecked="True"
                                  Checked="ShowGridOverlayCheckBox_Changed"
                                  Unchecked="ShowGridOverlayCheckBox_Changed"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- Preview Info -->
                <GroupBox Header="ℹ️ Grid-Vorschau" Padding="10">
                    <StackPanel>
                        <TextBlock Name="GridInfoTextBlock" 
                                   Text="Grid: 11 x 11 Linien&#x0a;Abstand: 100m&#x0a;Bereich: 1000m x 1000m"
                                   FontSize="11"
                                   Foreground="#666666"/>
                    </StackPanel>
                </GroupBox>
                
            </StackPanel>
        </Grid>
        
        <!-- Footer Buttons -->
        <StackPanel Grid.Row="2" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    Margin="0,20,0,0">
            <Button Name="CreateGridButton" 
                    Content="🗺️ Grid herstellen" 
                    Width="140" 
                    Height="40"
                    Background="#4CAF50"
                    Foreground="White"
                    FontWeight="Bold"
                    BorderThickness="0"
                    Margin="0,0,10,0"
                    Click="CreateGridButton_Click"/>
            <Button Name="CancelButton" 
                    Content="Abbrechen" 
                    Width="100" 
                    Height="40"
                    Background="#9E9E9E"
                    Foreground="White"
                    BorderThickness="0"
                    Click="CancelButton_Click"/>
        </StackPanel>
        
    </Grid>
</Window>
